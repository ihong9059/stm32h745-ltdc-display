<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STM32H745I-DISCO LTDC Display Project - 프로젝트 문서</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        nav {
            background: #f8f9fa;
            padding: 15px 40px;
            border-bottom: 2px solid #e9ecef;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        nav a {
            text-decoration: none;
            color: #667eea;
            font-weight: 600;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #764ba2;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: #555;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dee2e6;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
        }

        pre code {
            background: transparent;
            color: #f8f8f2;
            padding: 0;
        }

        .file-tree {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            line-height: 1.8;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
        }

        .step-list li {
            counter-increment: step-counter;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 5px;
            position: relative;
            padding-left: 60px;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        footer {
            background: #2d2d2d;
            color: white;
            padding: 30px;
            text-align: center;
        }

        footer p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>STM32H745I-DISCO LTDC Display Project</h1>
            <p>LCD-TFT Display Controller를 이용한 RGB565 이미지 디스플레이</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Dual Core (Cortex-M7 + Cortex-M4) 프로젝트</p>
        </header>

        <nav>
            <ul>
                <li><a href="#overview">개요</a></li>
                <li><a href="#hardware">하드웨어</a></li>
                <li><a href="#structure">프로젝트 구조</a></li>
                <li><a href="#implementation">구현 내용</a></li>
                <li><a href="#build">빌드 및 플래시</a></li>
                <li><a href="#troubleshooting">문제 해결</a></li>
                <li><a href="#continuation">프로젝트 재개 가이드</a></li>
            </ul>
        </nav>

        <div class="content">
            <!-- 개요 -->
            <section id="overview">
                <h2>1. 프로젝트 개요</h2>

                <div class="info-box">
                    <h4>프로젝트 목적</h4>
                    <p>STM32H745I-DISCO 보드의 LTDC (LCD-TFT Display Controller)를 사용하여 480x272 해상도의 RGB565 포맷 이미지를 LCD에 표시하는 프로젝트입니다. LTDC_Display_1Layer 참조 프로젝트와 동일한 기능을 구현합니다.</p>
                </div>

                <h3>주요 기능</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>LTDC 디스플레이</h4>
                        <p>하드웨어 기반 LCD 컨트롤러를 사용하여 고성능 그래픽 출력</p>
                    </div>
                    <div class="feature-card">
                        <h4>RGB565 이미지</h4>
                        <p>480x272 해상도의 RGB565 포맷 이미지를 Flash 메모리에서 직접 표시</p>
                    </div>
                    <div class="feature-card">
                        <h4>듀얼 코어 동기화</h4>
                        <p>Cortex-M7과 Cortex-M4 코어 간 Hardware Semaphore를 통한 동기화</p>
                    </div>
                    <div class="feature-card">
                        <h4>UART 디버깅</h4>
                        <p>USART3를 통한 실시간 디버그 메시지 출력</p>
                    </div>
                </div>

                <h3>프로젝트 사양</h3>
                <table>
                    <tr>
                        <th>항목</th>
                        <th>사양</th>
                    </tr>
                    <tr>
                        <td>MCU</td>
                        <td>STM32H745XIH (Dual Core: Cortex-M7 @ 400MHz + Cortex-M4 @ 200MHz)</td>
                    </tr>
                    <tr>
                        <td>LCD</td>
                        <td>RK043FN48H 4.3" 480x272 TFT LCD</td>
                    </tr>
                    <tr>
                        <td>픽셀 포맷</td>
                        <td>RGB565 (16-bit color)</td>
                    </tr>
                    <tr>
                        <td>프레임버퍼</td>
                        <td>Flash 메모리 직접 액세스</td>
                    </tr>
                    <tr>
                        <td>LTDC 클럭</td>
                        <td>9.63 MHz (PLL3)</td>
                    </tr>
                    <tr>
                        <td>시스템 클럭</td>
                        <td>400 MHz (CM7) / 200 MHz (CM4)</td>
                    </tr>
                </table>
            </section>

            <!-- 하드웨어 -->
            <section id="hardware">
                <h2>2. 하드웨어 구성</h2>

                <h3>STM32H745I-DISCO 보드</h3>
                <table>
                    <tr>
                        <th>컴포넌트</th>
                        <th>설명</th>
                    </tr>
                    <tr>
                        <td>MCU</td>
                        <td>STM32H745XIH - Dual-core Arm Cortex-M7/M4</td>
                    </tr>
                    <tr>
                        <td>Flash</td>
                        <td>2 MB (CM7: 0x08000000, CM4: 0x08100000)</td>
                    </tr>
                    <tr>
                        <td>RAM</td>
                        <td>1 MB (다양한 메모리 영역)</td>
                    </tr>
                    <tr>
                        <td>LCD</td>
                        <td>4.3" TFT LCD (RK043FN48H) with LTDC interface</td>
                    </tr>
                    <tr>
                        <td>디버거</td>
                        <td>내장 ST-LINK/V3</td>
                    </tr>
                </table>

                <h3>LCD 타이밍 파라미터 (RK043FN48H)</h3>
                <table>
                    <tr>
                        <th>파라미터</th>
                        <th>값</th>
                        <th>설명</th>
                    </tr>
                    <tr>
                        <td>WIDTH</td>
                        <td>480</td>
                        <td>LCD 가로 해상도</td>
                    </tr>
                    <tr>
                        <td>HEIGHT</td>
                        <td>272</td>
                        <td>LCD 세로 해상도</td>
                    </tr>
                    <tr>
                        <td>HSYNC</td>
                        <td>41</td>
                        <td>Horizontal synchronization</td>
                    </tr>
                    <tr>
                        <td>HBP</td>
                        <td>13</td>
                        <td>Horizontal back porch</td>
                    </tr>
                    <tr>
                        <td>HFP</td>
                        <td>32</td>
                        <td>Horizontal front porch</td>
                    </tr>
                    <tr>
                        <td>VSYNC</td>
                        <td>10</td>
                        <td>Vertical synchronization</td>
                    </tr>
                    <tr>
                        <td>VBP</td>
                        <td>2</td>
                        <td>Vertical back porch</td>
                    </tr>
                    <tr>
                        <td>VFP</td>
                        <td>2</td>
                        <td>Vertical front porch</td>
                    </tr>
                </table>

                <h3>GPIO 핀 할당 (LTDC)</h3>
                <div class="info-box">
                    <h4>LTDC 신호 핀맵</h4>
                    <ul>
                        <li><strong>Red[7:0]:</strong> PI15, PJ0, PJ1, PH9, PJ3, PJ4, PJ5, PJ6</li>
                        <li><strong>Green[7:0]:</strong> PJ7, PJ8, PJ9, PJ10, PJ11, PI0, PI1, PK2</li>
                        <li><strong>Blue[7:0]:</strong> PJ12, PJ13, PJ14, PJ15, PK3, PK4, PK5, PK6</li>
                        <li><strong>제어 신호:</strong></li>
                        <ul>
                            <li>CLK: PI14</li>
                            <li>DE: PK7</li>
                            <li>HSYNC: PI12</li>
                            <li>VSYNC: PI9</li>
                            <li>DISP (Enable): PD7 (GPIO 출력)</li>
                        </ul>
                    </ul>
                </div>
            </section>

            <!-- 프로젝트 구조 -->
            <section id="structure">
                <h2>3. 프로젝트 구조</h2>

                <h3>디렉토리 구조</h3>
                <div class="file-tree">
ltdc/
├── CM7/                           # Cortex-M7 코어 프로젝트
│   ├── Core/
│   │   ├── Inc/                   # 헤더 파일
│   │   │   ├── main.h
│   │   │   ├── ltdc.h
│   │   │   ├── ltdc_app.h         # LTDC 애플리케이션 인터페이스
│   │   │   ├── RGB565_480x272.h   # 이미지 데이터 헤더
│   │   │   ├── usart.h
│   │   │   ├── gpio.h
│   │   │   └── stm32h7xx_hal_conf.h
│   │   ├── Src/                   # 소스 파일
│   │   │   ├── main.c             # 메인 프로그램
│   │   │   ├── ltdc.c             # LTDC 초기화
│   │   │   ├── ltdc_app.c         # LTDC 애플리케이션 구현
│   │   │   ├── usart.c            # UART 디버그
│   │   │   ├── gpio.c
│   │   │   ├── stm32h7xx_hal_msp.c
│   │   │   └── stm32h7xx_it.c
│   │   └── Startup/
│   │       └── startup_stm32h745xihx.s
│   ├── Debug/                     # 빌드 출력
│   │   ├── ltdc_CM7.elf          # 실행 파일
│   │   ├── ltdc_CM7.map          # 메모리 맵
│   │   └── Makefile              # 빌드 스크립트
│   └── STM32H745XIHX_FLASH.ld    # 링커 스크립트
│
├── CM4/                           # Cortex-M4 코어 프로젝트
│   ├── Core/
│   │   ├── Inc/
│   │   │   └── main.h
│   │   ├── Src/
│   │   │   ├── main.c             # CM4 메인 (대기 루프)
│   │   │   └── ...
│   ├── Debug/
│   │   ├── ltdc_CM4.elf
│   │   └── Makefile
│   └── STM32H745XIHX_FLASH.ld
│
├── Common/                        # 공유 소스
│   └── Src/
│       └── system_stm32h7xx_dualcore_boot_cm4_cm7.c
│
├── Drivers/                       # HAL 드라이버
│   ├── STM32H7xx_HAL_Driver/
│   └── CMSIS/
│
└── LTDC_Project_Documentation.html  # 이 문서
                </div>

                <h3>주요 소스 파일 설명</h3>
                <table>
                    <tr>
                        <th>파일</th>
                        <th>역할</th>
                    </tr>
                    <tr>
                        <td><code>CM7/Core/Src/main.c</code></td>
                        <td>CM7 메인 프로그램: 시스템 초기화, 듀얼코어 동기화, LTDC 애플리케이션 시작</td>
                    </tr>
                    <tr>
                        <td><code>CM7/Core/Src/ltdc.c</code></td>
                        <td>LTDC 주변장치 초기화: 클럭 설정, GPIO 설정, 타이밍 파라미터 구성</td>
                    </tr>
                    <tr>
                        <td><code>CM7/Core/Src/ltdc_app.c</code></td>
                        <td>LTDC 애플리케이션: MPU 설정, 캐시 활성화, LCD 레이어 설정, 이미지 표시</td>
                    </tr>
                    <tr>
                        <td><code>CM7/Core/Inc/RGB565_480x272.h</code></td>
                        <td>480x272 RGB565 포맷 이미지 데이터 (Flash에 저장)</td>
                    </tr>
                    <tr>
                        <td><code>CM4/Core/Src/main.c</code></td>
                        <td>CM4 메인 프로그램: 부트 동기화 후 대기</td>
                    </tr>
                </table>
            </section>

            <!-- 구현 내용 -->
            <section id="implementation">
                <h2>4. 구현 내용</h2>

                <h3>4.1 LTDC 초기화 (ltdc.c)</h3>
                <div class="info-box">
                    <h4>주요 설정 항목</h4>
                </div>

<pre><code>/* LTDC 타이밍 설정 */
hltdc.Instance = LTDC;
hltdc.Init.HSPolarity = LTDC_HSPOLARITY_AL;
hltdc.Init.VSPolarity = LTDC_VSPOLARITY_AL;
hltdc.Init.DEPolarity = LTDC_DEPOLARITY_AL;
hltdc.Init.PCPolarity = LTDC_PCPOLARITY_IPC;

/* RK043FN48H LCD 타이밍 파라미터 */
hltdc.Init.HorizontalSync = 40;        /* HSYNC - 1 */
hltdc.Init.VerticalSync = 9;           /* VSYNC - 1 */
hltdc.Init.AccumulatedHBP = 53;        /* HSYNC + HBP - 1 */
hltdc.Init.AccumulatedVBP = 11;        /* VSYNC + VBP - 1 */
hltdc.Init.AccumulatedActiveW = 533;   /* Width + HSYNC + HBP - 1 */
hltdc.Init.AccumulatedActiveH = 283;   /* Height + VSYNC + VBP - 1 */
hltdc.Init.TotalWidth = 565;           /* Width + HSYNC + HBP + HFP - 1 */
hltdc.Init.TotalHeigh = 285;           /* Height + VSYNC + VBP + VFP - 1 */

/* 배경색 설정 */
hltdc.Init.Backcolor.Blue = 0;
hltdc.Init.Backcolor.Green = 0;
hltdc.Init.Backcolor.Red = 0;</code></pre>

                <h3>4.2 LTDC 클럭 설정</h3>
                <div class="info-box">
                    <h4>PLL3 설정으로 LTDC 클럭 생성</h4>
                </div>

<pre><code>/* PLL3 for LTDC Clock: 9.63 MHz */
PeriphClkInitStruct.PeriphClockSelection = RCC_PERIPHCLK_LTDC;
PeriphClkInitStruct.PLL3.PLL3M = 5;
PeriphClkInitStruct.PLL3.PLL3N = 160;
PeriphClkInitStruct.PLL3.PLL3R = 83;    /* 25MHz / 5 * 160 / 83 = 9.63MHz */
PeriphClkInitStruct.PLL3.PLL3RGE = RCC_PLL3VCIRANGE_2;
PeriphClkInitStruct.PLL3.PLL3VCOSEL = RCC_PLL3VCOWIDE;
PeriphClkInitStruct.PLL3.PLL3FRACN = 0;</code></pre>

                <h3>4.3 LCD 레이어 설정 (ltdc_app.c)</h3>

<pre><code>/* Layer 1 Configuration */
pLayerCfg.WindowX0 = 0;
pLayerCfg.WindowX1 = 480;
pLayerCfg.WindowY0 = 0;
pLayerCfg.WindowY1 = 272;
pLayerCfg.PixelFormat = LTDC_PIXEL_FORMAT_RGB565;
pLayerCfg.FBStartAdress = (uint32_t)&RGB565_480x272;  /* Flash 주소 */
pLayerCfg.Alpha = 255;                                  /* 불투명 */
pLayerCfg.Alpha0 = 0;
pLayerCfg.BlendingFactor1 = LTDC_BLENDING_FACTOR1_CA;
pLayerCfg.BlendingFactor2 = LTDC_BLENDING_FACTOR2_CA;
pLayerCfg.ImageWidth = 480;
pLayerCfg.ImageHeight = 272;</code></pre>

                <h3>4.4 MPU 및 캐시 설정</h3>
                <div class="info-box">
                    <h4>성능 최적화를 위한 MPU 및 캐시 구성</h4>
                    <ul>
                        <li>MPU: 메모리 보호 및 캐시 제어</li>
                        <li>I-Cache 활성화: 명령어 실행 속도 향상</li>
                        <li>D-Cache 활성화: 데이터 액세스 속도 향상</li>
                    </ul>
                </div>

                <h3>4.5 듀얼 코어 동기화</h3>
                <div class="info-box">
                    <h4>CM7과 CM4 간 부팅 순서 제어</h4>
                </div>

<pre><code>/* CM7: CM4가 STOP 모드에 진입할 때까지 대기 */
timeout = 0xFFFF;
while((__HAL_RCC_GET_FLAG(RCC_FLAG_D2CKRDY) != RESET) && (timeout-- > 0));

/* CM7 초기화 완료 후 CM4에 신호 전송 */
__HAL_RCC_HSEM_CLK_ENABLE();
HAL_HSEM_FastTake(HSEM_ID_0);
HAL_HSEM_Release(HSEM_ID_0, 0);

/* CM4가 깨어날 때까지 대기 */
timeout = 0xFFFF;
while((__HAL_RCC_GET_FLAG(RCC_FLAG_D2CKRDY) == RESET) && (timeout-- > 0));</code></pre>

                <h3>4.6 UART 디버그 출력</h3>
                <div class="info-box">
                    <h4>printf를 통한 디버그 메시지</h4>
                </div>

<pre><code>/* USART3로 printf 리다이렉션 */
int __io_putchar(int ch)
{
    HAL_UART_Transmit(&huart3, (uint8_t *)&ch, 1, HAL_MAX_DELAY);
    return ch;
}

/* 사용 예시 */
printf("=================================\r\n");
printf("STM32H745I-DISCO LTDC Display\r\n");
printf("LTDC_Display_1Layer Example\r\n");
printf("CM7 Core\r\n");
printf("=================================\r\n");</code></pre>
            </section>

            <!-- 빌드 및 플래시 -->
            <section id="build">
                <h2>5. 빌드 및 플래시</h2>

                <h3>5.1 빌드 환경</h3>
                <table>
                    <tr>
                        <th>툴</th>
                        <th>버전/경로</th>
                    </tr>
                    <tr>
                        <td>IDE</td>
                        <td>STM32CubeIDE 1.19.0</td>
                    </tr>
                    <tr>
                        <td>GCC Toolchain</td>
                        <td>arm-none-eabi-gcc 13.3.rel1</td>
                    </tr>
                    <tr>
                        <td>Programmer</td>
                        <td>STM32CubeProgrammer v2.20.0</td>
                    </tr>
                </table>

                <h3>5.2 명령줄 빌드 방법</h3>

                <h4>환경 변수 설정</h4>
<pre><code>export PATH="/Applications/STM32CubeIDE.app/Contents/Eclipse/plugins/\
com.st.stm32cube.ide.mcu.externaltools.gnu-tools-for-stm32.13.3.rel1.macos64_\
1.0.0.202411102158/tools/bin:/usr/bin:/bin:$PATH"</code></pre>

                <h4>CM7 빌드</h4>
<pre><code>cd ltdc/CM7/Debug
make clean
make all -j4</code></pre>

                <h4>CM4 빌드</h4>
<pre><code>cd ltdc/CM4/Debug
make clean
make all -j4</code></pre>

                <div class="success-box">
                    <h4>빌드 성공 확인</h4>
                    <p><strong>CM7:</strong> ltdc_CM7.elf (약 288 KB)<br>
                    <strong>CM4:</strong> ltdc_CM4.elf (약 33 KB)</p>
                </div>

                <h3>5.3 펌웨어 플래시</h3>

                <h4>환경 변수 설정</h4>
<pre><code>export PROG="/Applications/STM32CubeIDE.app/Contents/Eclipse/plugins/\
com.st.stm32cube.ide.mcu.externaltools.cubeprogrammer.macos64_2.2.200.202503041107/\
tools/bin/STM32_Programmer_CLI"</code></pre>

                <h4>연결 확인</h4>
<pre><code>"$PROG" -c port=SWD -q</code></pre>

                <h4>CM7 플래시</h4>
<pre><code>"$PROG" -c port=SWD -w ltdc/CM7/Debug/ltdc_CM7.elf -v -rst</code></pre>

                <h4>CM4 플래시</h4>
<pre><code>"$PROG" -c port=SWD -w ltdc/CM4/Debug/ltdc_CM4.elf -v -rst</code></pre>

                <div class="success-box">
                    <h4>플래시 성공 확인</h4>
                    <p>두 코어 모두 "Download verified successfully" 메시지가 나타나면 성공입니다.</p>
                </div>

                <h3>5.4 실행 및 확인</h3>
                <ol class="step-list">
                    <li>보드의 LCD에 이미지가 표시되는지 확인</li>
                    <li>UART (VCP)를 통해 디버그 메시지 확인 (115200 baud, 8N1)</li>
                    <li>정상 작동 시 다음 메시지가 출력됨:
<pre><code>=================================
STM32H745I-DISCO LTDC Display
LTDC_Display_1Layer Example
CM7 Core
=================================

Initializing LCD...
LCD initialized successfully!
RGB565 image displayed on LCD</code></pre>
                    </li>
                </ol>
            </section>

            <!-- 문제 해결 -->
            <section id="troubleshooting">
                <h2>6. 문제 해결</h2>

                <h3>6.1 빌드 오류</h3>

                <div class="warning-box">
                    <h4>오류: arm-none-eabi-gcc: command not found</h4>
                    <p><strong>원인:</strong> GCC 툴체인이 PATH에 없음<br>
                    <strong>해결:</strong> 5.2의 환경 변수 설정 명령 실행</p>
                </div>

                <div class="warning-box">
                    <h4>오류: undefined reference to 'RGB565_480x272'</h4>
                    <p><strong>원인:</strong> 이미지 데이터 헤더 파일 누락<br>
                    <strong>해결:</strong> CM7/Core/Inc/RGB565_480x272.h 파일 확인</p>
                </div>

                <h3>6.2 플래시 오류</h3>

                <div class="warning-box">
                    <h4>오류: No ST-LINK detected</h4>
                    <p><strong>원인:</strong> ST-LINK 연결 문제<br>
                    <strong>해결:</strong></p>
                    <ul>
                        <li>USB 케이블 재연결</li>
                        <li>보드 전원 확인</li>
                        <li>ST-LINK 드라이버 재설치</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4>오류: Verification failed</h4>
                    <p><strong>원인:</strong> 플래시 쓰기 오류<br>
                    <strong>해결:</strong></p>
                    <ul>
                        <li>전체 칩 삭제 후 재시도</li>
                        <li>보드 재부팅</li>
                        <li>ST-LINK 펌웨어 업데이트</li>
                    </ul>
                </div>

                <h3>6.3 실행 오류</h3>

                <div class="warning-box">
                    <h4>문제: LCD에 아무것도 표시되지 않음</h4>
                    <p><strong>가능한 원인과 해결책:</strong></p>
                    <ul>
                        <li><strong>LCD Enable 신호 (PD7):</strong> GPIO 설정 확인</li>
                        <li><strong>LTDC 타이밍:</strong> ltdc.c의 타이밍 파라미터 확인</li>
                        <li><strong>클럭 설정:</strong> PLL3 설정 확인 (9.63 MHz)</li>
                        <li><strong>이미지 주소:</strong> 프레임버퍼 주소가 올바른지 확인</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4>문제: 이미지가 깨져서 표시됨</h4>
                    <p><strong>가능한 원인과 해결책:</strong></p>
                    <ul>
                        <li><strong>픽셀 포맷:</strong> RGB565 설정 확인</li>
                        <li><strong>이미지 크기:</strong> 480x272 해상도 확인</li>
                        <li><strong>Window 설정:</strong> WindowX0/Y0 = 0, WindowX1/Y1 = 480/272</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4>문제: 듀얼 코어 동기화 실패</h4>
                    <p><strong>해결:</strong></p>
                    <ul>
                        <li>CM7과 CM4 모두 정상적으로 플래시되었는지 확인</li>
                        <li>HSEM (Hardware Semaphore) 초기화 확인</li>
                        <li>부트 시퀀스 타임아웃 값 조정</li>
                    </ul>
                </div>
            </section>

            <!-- 프로젝트 재개 가이드 -->
            <section id="continuation">
                <h2>7. 프로젝트 재개 가이드</h2>

                <div class="success-box">
                    <h4>이 섹션은 다음 세션에서 프로젝트를 이어서 진행할 때 사용하세요</h4>
                </div>

                <h3>7.1 현재 프로젝트 상태</h3>

                <div class="info-box">
                    <h4>완료된 작업</h4>
                    <ul>
                        <li>✅ LTDC_Display_1Layer 참조 프로젝트 분석</li>
                        <li>✅ ltdc 프로젝트 LTDC 타이밍 파라미터 수정</li>
                        <li>✅ CM7 및 CM4 빌드 성공</li>
                        <li>✅ 펌웨어 플래시 완료</li>
                        <li>✅ HTML 문서 생성</li>
                    </ul>
                </div>

                <h3>7.2 주요 변경 사항</h3>

                <table>
                    <tr>
                        <th>파일</th>
                        <th>변경 내용</th>
                    </tr>
                    <tr>
                        <td><code>CM7/Core/Src/ltdc.c</code></td>
                        <td>
                            - LTDC 타이밍 파라미터를 RK043FN48H에 맞게 수정<br>
                            - HorizontalSync, VerticalSync, AccumulatedHBP/VBP 등 정확한 값 설정<br>
                            - Layer 설정을 Layer 1으로 변경
                        </td>
                    </tr>
                </table>

                <h3>7.3 빠른 시작 가이드</h3>

                <ol class="step-list">
                    <li>
                        <strong>프로젝트 위치 확인</strong><br>
                        <code>/Users/maeg/todo/stm32/ltdc</code>
                    </li>
                    <li>
                        <strong>빌드 환경 설정</strong><br>
                        터미널에서 다음 명령 실행:
<pre><code>export PATH="/Applications/STM32CubeIDE.app/Contents/Eclipse/plugins/\
com.st.stm32cube.ide.mcu.externaltools.gnu-tools-for-stm32.13.3.rel1.macos64_\
1.0.0.202411102158/tools/bin:/usr/bin:/bin:$PATH"</code></pre>
                    </li>
                    <li>
                        <strong>빌드 실행</strong><br>
<pre><code>cd /Users/maeg/todo/stm32/ltdc/CM7/Debug
make clean && make all -j4

cd /Users/maeg/todo/stm32/ltdc/CM4/Debug
make clean && make all -j4</code></pre>
                    </li>
                    <li>
                        <strong>플래시</strong><br>
<pre><code>export PROG="/Applications/STM32CubeIDE.app/Contents/Eclipse/plugins/\
com.st.stm32cube.ide.mcu.externaltools.cubeprogrammer.macos64_2.2.200.202503041107/\
tools/bin/STM32_Programmer_CLI"

"$PROG" -c port=SWD -w /Users/maeg/todo/stm32/ltdc/CM7/Debug/ltdc_CM7.elf -v -rst
"$PROG" -c port=SWD -w /Users/maeg/todo/stm32/ltdc/CM4/Debug/ltdc_CM4.elf -v -rst</code></pre>
                    </li>
                </ol>

                <h3>7.4 추가 개발 아이디어</h3>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>멀티 레이어</h4>
                        <p>LTDC Layer 2를 추가하여 오버레이 이미지 표시</p>
                    </div>
                    <div class="feature-card">
                        <h4>동적 이미지</h4>
                        <p>SDRAM 프레임버퍼를 사용하여 실시간 그래픽 렌더링</p>
                    </div>
                    <div class="feature-card">
                        <h4>터치스크린</h4>
                        <p>터치 입력을 통한 사용자 인터페이스 구현</p>
                    </div>
                    <div class="feature-card">
                        <h4>DMA2D</h4>
                        <p>하드웨어 그래픽 가속을 위한 DMA2D 통합</p>
                    </div>
                </div>

                <h3>7.5 참고 자료</h3>

                <table>
                    <tr>
                        <th>자료</th>
                        <th>설명</th>
                    </tr>
                    <tr>
                        <td>Reference Manual</td>
                        <td>RM0399 - STM32H745/755 Reference Manual</td>
                    </tr>
                    <tr>
                        <td>Datasheet</td>
                        <td>DS12110 - STM32H745xI/G Datasheet</td>
                    </tr>
                    <tr>
                        <td>LCD Datasheet</td>
                        <td>RK043FN48H LCD Panel Specification</td>
                    </tr>
                    <tr>
                        <td>HAL Driver</td>
                        <td>STM32H7xx HAL Driver Documentation</td>
                    </tr>
                    <tr>
                        <td>LTDC Application Note</td>
                        <td>AN4861 - LCD-TFT display controller on STM32 MCUs</td>
                    </tr>
                </table>
            </section>
        </div>

        <footer>
            <p><strong>STM32H745I-DISCO LTDC Display Project</strong></p>
            <p>프로젝트 위치: /Users/maeg/todo/stm32/ltdc</p>
            <p>문서 생성일: 2025-11-17</p>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                이 문서는 프로젝트 재개 시 빠른 참조를 위해 작성되었습니다.<br>
                빌드 및 플래시 명령은 복사하여 터미널에서 직접 실행할 수 있습니다.
            </p>
        </footer>
    </div>
</body>
</html>
