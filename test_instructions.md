# LTDC 화면 문제 진단 가이드

## 현재 상태
- CM7, CM4 모두 플래시 완료
- 화면이 흰색으로 표시됨 (변화 없음)

## 진단 단계

### 1. 시리얼 출력 확인
터미널에서 다음 명령 실행:
```bash
screen /dev/cu.usbmodem142103 115200
```

또는:
```bash
python3 simple_serial.py
# 포트 선택 시 2번 선택
```

**확인사항:**
- "STM32H745I-DISCO LTDC Display" 메시지가 보이는가?
- "DEBUG: Before LTDC_App_Init" 메시지가 보이는가?
- "DEBUG: After LTDC_App_Init" 메시지가 보이는가?

만약 "Before" 메시지는 보이지만 "After" 메시지가 보이지 않으면:
→ **LTDC_App_Init() 함수에서 크래시 발생**

만약 아무 메시지도 보이지 않으면:
→ **시스템 초기화 단계에서 문제 발생**

### 2. 가능한 문제들

#### 문제 A: MPU/캐시 설정 충돌
참조 프로젝트는 HAL_Init() 전에 MPU와 캐시를 설정하지만,
우리 프로젝트는 LTDC_App_Init()에서 다시 설정

**해결 방법**: ltdc_app.c에서 MPU/캐시 설정 제거

#### 문제 B: 프레임버퍼 주소 문제
RGB565_480x272 이미지가 Flash에 올바르게 저장되지 않았을 수 있음

**확인**: RGB565_480x272.h 파일 크기 확인
```bash
ls -lh /Users/maeg/todo/stm32/ltdc/CM7/Core/Inc/RGB565_480x272.h
```
약 500KB 이상이어야 함

#### 문제 C: LTDC 클럭 문제
PLL3 설정이 올바르지 않을 수 있음

**확인**: ltdc.c의 HAL_LTDC_MspInit에서 PLL3 설정 확인

#### 문제 D: GPIO 핀 설정 문제
LCD Enable 신호 (PD7)가 켜지지 않았을 수 있음

**해결**: ltdc_app.c 40-50라인의 GPIO 설정 확인

### 3. 빠른 테스트 - 단색 화면

다음 단계는 이미지 대신 단순한 단색 화면을 표시하는 것입니다.

LTDC는 프레임버퍼 없이도 배경색만 표시할 수 있습니다.

## 다음 작업 제안

1. **시리얼 출력 확인** - 어디서 멈추는지 파악
2. **MPU/캐시 설정 제거** - LTDC_App_Init에서 제거하고 main에서만 호출
3. **단색 테스트** - 이미지 대신 빨간색 화면 표시
4. **참조 프로젝트와 1:1 비교** - 초기화 순서를 완전히 동일하게

시리얼 출력 결과를 알려주시면 다음 단계를 진행하겠습니다.
